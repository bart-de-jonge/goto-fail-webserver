<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../colors.html">

<dom-module id="timeline-dialog">
    <template>
        <style include="iron-flex iron-flex-alignment">

        </style>
        <iron-ajax
                id="getPresets"
                handle-as="json"
                method = "GET"
                content-type="application/json"
                on-response="handleGetPresetsResponse"></iron-ajax>

        <paper-dialog id="dialog" modal>
            <h2>Title goes here.</h2>
            <p>Text goes here. Lorem ipsum dolorem tetetet.</p>

            <template is="dom-repeat" items="{{presets}}" id="presetsRepeat">
                <p>{{item.name}}</p>
            </template>

            <div id="buttons">
                <paper-button dialog-dismiss>Cancel</paper-button>
                <paper-button on-click="clicked">Test</paper-button>
                <paper-button dialog-confirm>Accept</paper-button>
            </div>
        </paper-dialog>

    </template>
    <script>
    (function() {
    'use strict';
    class timelineDialog {
        beforeRegister() {
            this.is = 'timeline-dialog';

            this.properties = {
                block_data: Object,
                camera: Object,
                presets: Array
            };
        }

        showDialog() {
            this.$.getPresets.url = "/benine/cameras/" + this.camera.id + "/presets"
            this.$.getPresets.generateRequest();
            this.$.dialog.open();
        }

        clicked() {
            // todo-dedo-dedo
        }

        handleGetPresetsResponse(event) {
            this.presets = event.detail.response.presets;
        }

    }
    Polymer(timelineDialog);
    })();
    </script>
</dom-module>
