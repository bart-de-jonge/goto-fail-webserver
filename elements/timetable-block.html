<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="timetable-block">
    // Template
    <template>
        <style>

        </style>

        // ajax request
        <iron-ajax
                auto
                url="/timeline/timeline-data"
                handle-as="json"
                onResponse="onResponse",
                last-response="{{jsondata}}"
                id="ajax"></iron-ajax>

        <template is="dom-repeat" items="{{jsondata.cameraTimelines}}">
            <p>{{index}}</p>
            <p>{{item.name}}</p>
            <p>{{item.description}}</p>

            <template is="dom-repeat" items="{{item.cameraShots}}">
                <paper-material elevation="1">
                    <p>{{item.name}}</p>
                    <p>{{item.description}}</p>
                    <p>{{item.beginCount}} - {{item.endCount}}</p>
                </paper-material>
            </template>
        </template>

        <!--<paper-material elevation="1">-->
            <!--<p>{{jsondata.timetableBlocks}}</p>-->
            <!--<p>{{block.description}}</p>-->
            <!--<p>{{block.beginCount}} - {{block.endCount}}</p>-->
        <!--</paper-material>-->

    </template>

    // Scripts
    <script>
    (function() {
    'use strict';
    class timetableBlock {
        beforeRegister() {
            this.is = 'timetable-block';

            this.properties = {
                name: String
            };
        }
        attached() {
//            $.ajax("/timeline/timeline-data").done((res) => {
//                this.name = res.cameraTimelines[0].name;
//            });
//            this.$.ajax.generateRequest();
            console.log('the page is loaded');
//            console.log(jsondata);

        }
        onResponse(request) {
//            if(request.succeeded) {
//                console.log("succes bitches");
//                console.log(request.response);
//            } else {
//                console.log("error bitches");
//            }
            console.log(jsondata);
        }
    }
    Polymer(timetableBlock);
    })();
    </script>
</dom-module>